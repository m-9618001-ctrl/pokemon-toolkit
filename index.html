<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Toolkit</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* UI REVAMP 2.0 - Modern Pokédex Light Theme */
        :root {
            --primary-bg: #f8f9fa;      /* A very light gray */
            --secondary-bg: #ffffff;    /* White for panels/cards */
            --tertiary-bg: #e9ecef;      /* A slightly darker gray for hovers */
            --accent: #e63946;          /* A strong, Pokédex-like red */
            --accent-dark: #d62828;      /* A darker red for hover */
            --text-light: #212529;      /* Dark text for readability */
            --text-dark: #6c757d;       /* Grayer text for secondary info */
            --border-color: #dee2e6;    /* A light, clean border color */
            --success: #22c55e;
            --error: #ef4444;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--tertiary-bg); }
        ::-webkit-scrollbar-thumb { background: var(--text-dark); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-light);
            overflow: hidden;
            background-image: linear-gradient(var(--border-color) 1px, transparent 1px), linear-gradient(to right, var(--border-color) 1px, var(--primary-bg) 1px);
            background-size: 20px 20px;
        }
        .app-container { display: flex; height: 100vh; }
        .main-content { flex-grow: 1; overflow-y: auto; padding: 2rem; }
        .main-view { display: none; }
        .main-view.active { display: block; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* App Navigation (Icons) */
        .app-nav {
            background-color: var(--secondary-bg);
            border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; align-items: center;
            padding: 1rem 0.5rem; gap: 0.5rem;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
        }
        .app-tab {
            width: 48px; height: 48px;
            border-radius: 0.75rem;
            background-color: var(--tertiary-bg);
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 1.25rem;
            border: 1px solid var(--border-color);
        }
        .app-tab:hover { background-color: #d8dde2; color: var(--text-light); }
        .app-tab.active { background-color: var(--accent); color: white; border-color: var(--accent-dark); box-shadow: 0 4px 12px -4px var(--accent); }
        .app-tab svg { width: 24px; height: 24px; }

        /* Sidebar */
        .sidebar {
            background-color: var(--secondary-bg);
            border-right: 1px solid var(--border-color);
            width: 320px; flex-shrink: 0;
            display: flex; flex-direction: column;
            transition: transform 0.3s ease-in-out;
            box-shadow: 4px 0 10px rgba(0,0,0,0.05);
        }
        .sidebar-panel { display: none; }
        .sidebar-panel.active { display: flex; flex-direction: column; height: 100%; }
        .sidebar-header { padding: 1.5rem; border-bottom: 1px solid var(--border-color); }
        .sidebar-header h2 { font-size: 1.75rem; font-weight: 700; }
        .sidebar-content { padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; overflow-y: auto; flex-grow: 1; }
        .sidebar-footer { margin-top: auto; display: flex; gap: 0.75rem; padding: 1.5rem; border-top: 1px solid var(--border-color); background-color: var(--primary-bg); }

        /* Form Elements */
        .form-group label, details summary { font-weight: 500; color: var(--text-light); cursor: pointer; }
        details {
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            transition: background-color 0.2s;
        }
        details[open] { background: var(--secondary-bg); }
        details summary { 
            padding: 0.75rem 1rem; 
            list-style: none;
            display: flex; justify-content: space-between; align-items: center;
            font-weight: 600;
        }
        details summary::-webkit-details-marker { display: none; }
        details summary::after {
            content: '▼';
            font-size: 0.7rem;
            transition: transform 0.2s;
            color: var(--text-dark);
        }
        details[open] > summary::after { transform: rotate(180deg); }
        details > div { padding: 0 1rem 1rem 1rem; }
        input, select {
            width: 100%; background-color: var(--tertiary-bg);
            border: 1px solid var(--border-color); border-radius: 0.5rem;
            padding: 0.75rem; color: var(--text-light); transition: all 0.2s;
            font-weight: 500;
        }
        input:focus, select:focus {
            border-color: var(--accent); outline: none; background-color: var(--secondary-bg);
            box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.25);
        }
        .sidebar-footer button, .generic-btn {
            padding: 0.8rem; border-radius: 0.5rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;
            background-color: var(--accent); color: white; transition: all 0.2s; 
            border: none; border-bottom: 3px solid var(--accent-dark);
        }
        .sidebar-footer button:hover, .generic-btn:hover { background-color: var(--accent-dark); color: white; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .sidebar-footer button:active, .generic-btn:active { transform: translateY(0); box-shadow: none; }
        .sidebar-footer button[type="reset"], .secondary-btn { background-color: var(--tertiary-bg); color: var(--text-light); border-bottom-color: #adb5bd; }
        .sidebar-footer button[type="reset"]:hover, .secondary-btn:hover { background-color: #ced4da; }

        /* Mobile Layout */
        @media (max-width: 767px) {
            .app-container { flex-direction: column-reverse; }
            .app-nav {
                flex-direction: row; justify-content: space-around;
                width: 100%; height: 65px; padding: 0.5rem;
                border-right: none; border-top: 1px solid var(--border-color);
                position: fixed; bottom: 0; left: 0; right: 0;
                z-index: 1000;
                background-color: var(--secondary-bg);
            }
            .app-tab { flex: 1; max-width: 55px; }
            .sidebar {
                position: fixed; top: 0; left: 0; bottom: 0;
                width: 85%; max-width: 320px;
                transform: translateX(-100%);
                z-index: 2000; border-right: 1px solid var(--border-color);
            }
            .sidebar.open { transform: translateX(0); }
            .sidebar-overlay {
                position: fixed; inset: 0;
                background: rgba(0,0,0,0.5); z-index: 1999;
                opacity: 0; visibility: hidden; transition: opacity 0.3s ease;
            }
            .sidebar-overlay.show { opacity: 1; visibility: visible; }
            .main-content { padding: 1rem 1rem 85px 1rem; }
        }

        /* General UI */
        .main-header { text-align: center; margin-bottom: 2rem; }
        .main-header h1 { font-size: 2.25rem; font-weight: 700; }
        .main-header p { color: var(--text-dark); max-width: 60ch; margin: 0.5rem auto 0; }
        .placeholder { text-align: center; color: var(--text-dark); padding-top: 4rem; border: 2px dashed var(--border-color); border-radius: 1rem; background-color: var(--secondary-bg); }
        .placeholder-icon { width: 100px; height: 100px; margin: 0 auto 1rem; opacity: 0.3; }
        .modal-content {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* Card Polish */
        .card-container { perspective: 1500px; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.7s; transform-style: preserve-3d; }
        .card-container.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { /* New Card Styling */
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 1.5rem;
            background: var(--secondary-bg);
            border: 4px solid var(--border-color);
            overflow: hidden;
            padding: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
        }
        .card-back { transform: rotateY(180deg); }
        .card-bg-gradient {
            position: absolute; inset: 0;
            opacity: 0.15;
            z-index: -1;
        }
        .card-back {
            background-image: radial-gradient(var(--tertiary-bg) 1px, transparent 1px);
            background-size: 10px 10px;
        }
        .card-back-nav {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin: -1.5rem -1.5rem 1rem -1.5rem;
            padding: 0 1.5rem;
        }
        .card-back-tab {
            padding: 0.75rem 1rem;
            cursor: pointer;
            color: var(--text-dark);
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            margin-bottom: -1px;
        }
        .card-back-tab:hover { color: var(--text-light); }
        .card-back-tab.active { color: var(--accent); border-bottom-color: var(--accent); }
        .card-back-content { display: none; }
        .card-back-content.active { display: block; animation: fadeIn 0.3s; }
        .stat-bar-bg { background-color: var(--tertiary-bg); }
        .stat-bar { background-color: var(--accent); transition: width 0.5s ease-out; }
        
        /* Team Builder List Item */
        .team-member {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 1rem;
            align-items: start;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 4px 12px -4px rgba(0,0,0,0.05);
            transition: all 0.2s ease-out;
        }
        .team-member:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px -8px rgba(0,0,0,0.1);
            border-color: #ced4da;
        } 

        .card-front .relative.w-48 { /* Sprite container */
            background-color: rgba(0,0,0,0.03);
            border: 1px solid var(--border-color);
        }
        .card-front .add-to-team-btn { /* Add to team button */
            background-color: var(--accent); color: white;
            border-bottom: 3px solid var(--accent-dark);
            transition: all 0.15s ease-out;
        }
        .card-front .add-to-team-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .card-front .add-to-team-btn:active { transform: translateY(0); box-shadow: none; }

        .type-icon { 
            display: inline-flex; align-items: center; justify-content: center; 
            width: 28px; height: 28px; border-radius: 50%; 
            font-size: 11px; font-weight: bold; color: white; text-transform: uppercase; 
            border: 1px solid rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        .type-normal { background-color: #A8A77A; } .type-fire { background-color: #EE8130; } .type-water { background-color: #6390F0; } .type-electric { background-color: #F7D02C; color: #1f2937 !important; } .type-grass { background-color: #7AC74C; } .type-ice { background-color: #96D9D6; } .type-fighting { background-color: #C22E28; } .type-poison { background-color: #A33EA1; } .type-ground { background-color: #E2BF65; } .type-flying { background-color: #A98FF3; } .type-psychic { background-color: #F95587; } .type-bug { background-color: #A6B91A; } .type-rock { background-color: #B6A136; } .type-ghost { background-color: #735797; } .type-dragon { background-color: #6F35FC; } .type-dark { background-color: #705746; } .type-steel { background-color: #B7B7CE; } .type-fairy { background-color: #D685AD; }

        /* Tippy.js Tooltip Style */
        .tippy-box[data-theme~='pkmn'] {
            background-color: var(--text-light);
            color: var(--text-light);
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            font-weight: 600;
            font-size: 0.8rem;
        }
        .tippy-box[data-theme~='pkmn'][data-placement^='right'] > .tippy-arrow::before {
            border-right-color: var(--text-light);
        }
        .tippy-box[data-theme~='pkmn'][data-placement^='left'] > .tippy-arrow::before {
            border-left-color: var(--text-light);
        }
        .tippy-box[data-theme~='pkmn'][data-placement^='top'] > .tippy-arrow::before {
            border-top-color: var(--text-light);
        }
        .tippy-box[data-theme~='pkmn'][data-placement^='bottom'] > .tippy-arrow::before {
            border-bottom-color: var(--text-light);
        }
    </style>
</head>
<body>
    <div id="notification-container" class="fixed top-5 right-5 z-[5000] flex flex-col gap-3"></div>
    <div id="sidebar-overlay" class="hidden md:hidden"></div>

    <!-- Modals -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden"><div class="modal-content p-6 rounded-lg shadow-xl max-w-sm w-full text-center"><p id="confirmation-message" class="mb-6 text-lg">Are you sure?</p><div class="flex gap-4"><button id="confirm-no-btn" class="w-full p-2 bg-tertiary-bg rounded">No</button><button id="confirm-yes-btn" class="w-full p-2 bg-red-600 text-white rounded">Yes</button></div></div></div>
    <div id="assign-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden"><div class="modal-content p-6 rounded-lg shadow-xl max-w-sm w-full"><div class="flex justify-between items-center mb-4"><h3 id="assign-modal-title" class="font-bold text-lg">Assign to...</h3><button id="close-assign-modal-btn" class="text-2xl">&times;</button></div><div id="team-selection-list" class="space-y-2"></div></div></div>
    <div id="type-coverage-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden">
        <div class="modal-content p-6 rounded-lg shadow-xl max-w-6xl w-full h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-border-color pb-4">
                <h3 class="font-bold text-2xl">Team Coverage Analysis</h3><button id="close-coverage-modal-btn" class="text-3xl">&times;</button>
            </div>
            <div id="coverage-output" class="overflow-y-auto flex-grow pr-2"></div>
        </div>
    </div>
    <div id="team-export-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden"><div class="modal-content p-6 rounded-lg shadow-xl max-w-lg w-full flex flex-col"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-xl">Export Team</h3><button id="close-export-modal-btn" class="text-2xl">&times;</button></div><textarea id="export-textarea" class="w-full h-64 bg-primary-bg border border-border-color rounded p-2 text-sm font-mono"></textarea><button id="copy-export-btn" class="mt-4 p-2 bg-accent rounded text-white font-bold">Copy to Clipboard</button></div></div>
    <div id="move-details-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden"><div class="modal-content p-6 rounded-lg shadow-xl max-w-md w-full"><div class="flex justify-between items-center mb-4"><h3 id="move-modal-name" class="font-bold text-2xl capitalize">Move Name</h3><button id="close-move-modal-btn" class="text-3xl">&times;</button></div><div id="move-modal-content"></div></div></div>

    <!-- Manual Move Selection Modal -->
    <div id="manual-move-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden"><div class="modal-content p-6 rounded-lg shadow-xl max-w-2xl w-full h-[90vh] flex flex-col"><div class="flex justify-between items-center mb-4"><h3 id="manual-move-modal-title" class="font-bold text-xl">Select Moves</h3><button id="close-manual-move-modal-btn" class="text-2xl">&times;</button></div><div id="manual-move-modal-content" class="overflow-y-auto flex-grow pr-2"></div></div></div>

    <!-- Manual Ability Selection Modal -->
    <div id="manual-ability-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden">
        <div class="modal-content p-6 rounded-lg shadow-xl max-w-lg w-full h-auto max-h-[80vh] flex flex-col">
            <div class="flex justify-between items-center mb-4"><h3 id="manual-ability-modal-title" class="font-bold text-xl">Select Ability</h3><button id="close-manual-ability-modal-btn" class="text-2xl">&times;</button></div>
            <div id="manual-ability-modal-content" class="overflow-y-auto flex-grow pr-2"></div>
        </div>
    </div>

    <!-- Manual Item Selection Modal -->
    <div id="manual-item-modal" class="fixed inset-0 bg-black/50 z-[4000] flex items-center justify-center p-4 hidden">
        <div class="modal-content p-6 rounded-lg shadow-xl max-w-2xl w-full h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4"><h3 id="manual-item-modal-title" class="font-bold text-xl">Select Item</h3><button id="close-manual-item-modal-btn" class="text-2xl">&times;</button></div>
            <input type="search" id="item-search-input" placeholder="Search for an item..." class="w-full bg-primary-bg border border-border-color rounded p-2 mb-4">
            <div id="manual-item-modal-content" class="overflow-y-auto flex-grow pr-2"></div>
        </div>
    </div>

    <div class="app-container">
        <!-- App Navigation -->
        <nav class="app-nav">
            <button class="app-tab active" data-target="generator-panel" data-view="generator-view" data-tippy-content="Generator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg>
            </button>
            <button class="app-tab" data-target="team-builder-panel" data-view="team-builder-view" data-tippy-content="Team Builder">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>
            </button>
            <button class="app-tab" data-target="pokedex-panel" data-view="pokedex-view" data-tippy-content="Pokédex">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" /></svg>
            </button>
            <button class="app-tab" data-target="ability-generator-panel" data-view="ability-generator-view" data-tippy-content="Ability Reroller">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" /></svg>
            </button>
            <button class="app-tab" data-target="move-panel" data-view="move-view" data-tippy-content="Move Generator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M10.5 20.25v-2.25m-5.834.166 1.591-1.591M3.75 10.5H6m-2.25 4.5 1.591-1.591" /></svg>
            </button>
            <button class="app-tab" data-target="nature-panel" data-view="nature-view" data-tippy-content="Nature Generator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" /></svg>
            </button>
            <button class="app-tab" data-target="wtp-panel" data-view="wtp-view" data-tippy-content="Who's That Pokémon?">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" /></svg>
            </button>
        </nav>

        <!-- Sidebar -->
        <aside id="sidebar-main" class="sidebar">
            <!-- POKEMON GENERATOR PANEL -->
            <div id="generator-panel" class="sidebar-panel active">
                <div class="sidebar-header flex justify-between items-center">
                    <h2>Generator</h2>
                    <button class="close-sidebar-btn text-2xl md:hidden">&times;</button>
                </div>
                <form id="generatorForm" class="sidebar-content">
                    <div class="form-group">
                        <label for="count" class="text-sm font-medium text-slate-300 mb-2">How Many?</label>
                        <input type="number" id="count" name="count" value="1" min="1" max="6" class="w-full">
                    </div>

                    <details class="filter-group" open>
                        <summary>Regions</summary>
                        <div class="p-2 space-y-2 max-h-48 overflow-y-auto">
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="1" checked> Gen I (Kanto)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="2" checked> Gen II (Johto)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="3" checked> Gen III (Hoenn)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="4" checked> Gen IV (Sinnoh)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="5" checked> Gen V (Unova)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="6" checked> Gen VI (Kalos)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="7" checked> Gen VII (Alola)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="8" checked> Gen VIII (Galar/Hisui)</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="gen" value="9" checked> Gen IX (Paldea/Kitakami)</label>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Typing</summary>
                        <div class="p-2 grid grid-cols-2 gap-2">
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="normal" checked> Normal</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="fire" checked> Fire</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="water" checked> Water</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="grass" checked> Grass</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="electric" checked> Electric</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="ice" checked> Ice</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="fighting" checked> Fighting</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="poison" checked> Poison</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="ground" checked> Ground</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="flying" checked> Flying</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="psychic" checked> Psychic</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="bug" checked> Bug</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="rock" checked> Rock</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="ghost" checked> Ghost</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="dragon" checked> Dragon</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="dark" checked> Dark</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="steel" checked> Steel</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="type" value="fairy" checked> Fairy</label>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Color</summary>
                        <div class="p-2">
                            <select id="color-filter" name="color" class="w-full">
                                <option value="">Any Color</option>
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Rarity & Forms</summary>
                        <div class="p-2 space-y-2">
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="include-legendary" checked> Include Legendary</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="include-mythical" checked> Include Mythical</label>
                            <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="include-forms" checked> Include Alternate Forms</label>
                        </div>
                    </details>
                    
                    <details class="filter-group">
                        <summary>Evolution Stage</summary>
                        <div class="p-2 space-y-2">
                             <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="evolution-stage" value="nfe" checked> Not Fully Evolved</label>
                             <label class="grid grid-cols-[auto_1fr] items-center gap-x-2"><input type="checkbox" name="evolution-stage" value="fully-evolved" checked> Fully Evolved</label>
                        </div>
                    </details>

                </form>
                <div class="sidebar-footer grid grid-cols-2"><button type="submit" form="generatorForm" class="col-span-2">Generate</button></div>
            </div>
            <!-- TEAM BUILDER PANEL -->
            <div id="team-builder-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Team Builder</h2><button class="close-sidebar-btn text-3xl md:hidden">&times;</button></div>
                <div class="sidebar-content" id="team-management-content">
                    <div class="form-group">
                        <label for="teamNameInput" class="font-bold mb-2">Save Current Team</label>
                        <div class="flex gap-2"><input type="text" id="teamNameInput" placeholder="Team Name" class="w-full"><button id="saveTeamBtn" class="p-2 bg-accent rounded">Save</button></div>
                    </div>
                    <div>
                        <h3 class="font-bold mb-2">Saved Teams</h3><div id="saved-teams-list" class="space-y-1"></div>
                    </div>
                </div>
            </div>
            <!-- POKEDEX PANEL -->
            <div id="pokedex-panel" class="sidebar-panel"><div class="sidebar-header flex justify-between items-center"><h2>Pokédex</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div><div class="sidebar-content"><p class="text-sm text-text-dark">Search for any Pokémon to see its detailed information, evolution chain, and more.</p></div></div>
            <!-- ABILITY PANEL -->
            <div id="ability-generator-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Ability Reroller</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="abilityGeneratorForm" class="sidebar-content">
                    <div id="ability-reroller-content">
                        <!-- This will be populated by script.js -->
                    </div>
                    <div class="form-group mt-4">
                        <label for="ability-count" class="font-bold mb-2">How Many?</label>
                        <input type="number" id="ability-count" value="1" min="1" max="10">
                    </div>
                </form>
            </div>
            <!-- MOVE PANEL -->
            <div id="move-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Move Generator</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="moveGeneratorForm" class="sidebar-content">
                    <div class="form-group"><label for="move-count" class="font-bold mb-2">How Many?</label><input type="number" id="move-count" value="1" min="1" max="10"></div>
                </form>
            </div>
             <!-- NATURE PANEL -->
            <div id="nature-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Nature Generator</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="natureGeneratorForm" class="sidebar-content"><div class="form-group"><label for="nature-count" class="text-sm font-medium text-slate-300 mb-2">How Many?</label><input type="number" id="nature-count" value="1" min="1" max="10"></div></form>
                <div class="sidebar-footer"><button type="submit" form="natureGeneratorForm">Generate</button></div>
            </div>
             <!-- WTP PANEL -->
            <div id="wtp-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Who's That Pokémon?</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <div class="sidebar-content"><p class="text-sm text-gray-400">Test your Pokémon knowledge! Click "New Game" to start.</p></div>
                <div class="sidebar-footer"><button id="wtp-new-game-btn">New Game</button></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- GENERATOR VIEW -->
            <div id="generator-view" class="main-view active">
                <div class="flex justify-center mb-8">
                    <button type="submit" form="generatorForm" class="w-full max-w-xs generic-btn">Generate Pokémon</button>
                </div>
                <div id="initial-state" class="placeholder p-8">
                    <svg class="placeholder-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg>
                    <h3 class="text-xl font-bold">Pokémon Generator</h3>
                    <p>Use the filters in the sidebar to generate Pokémon!</p>
                </div>
                <div id="result-output" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 w-full place-items-center"></div>
            </div>
            <!-- TEAM BUILDER VIEW -->
            <div id="team-builder-view" class="main-view">
                <header class="main-header">
                    <h1>Current Team</h1>
                    <div class="mt-4 flex justify-center flex-wrap gap-2">
                        <button id="analyze-team-btn" class="generic-btn">Analyze Team</button>
                        <button id="random-team-btn" class="secondary-btn">Random Team</button>
                        <button id="export-team-btn" class="secondary-btn">Export</button>
                        <button id="clearTeamBtn" class="p-2 rounded font-bold uppercase tracking-wider bg-red-800/50 hover:bg-red-800 text-white">Clear Team</button>
                    </div>
                </header>
                <div id="team-builder-output" class="space-y-3 max-w-4xl mx-auto"></div>
            </div>
            <!-- POKEDEX VIEW -->
            <div id="pokedex-view" class="main-view">
                <form id="pokedexForm" class="max-w-2xl mx-auto mb-8 flex gap-2">
                    <input type="search" id="pokedexSearch" placeholder="Search by Name or Number (e.g., Pikachu or 25)" class="flex-grow">
                    <button type="submit" class="generic-btn">Search</button>
                </form>
                <div id="pokedex-card-container"></div>
                <div id="evolution-chain-container" class="mt-8"></div>
            </div>
            <!-- ABILITY VIEW -->
            <div id="ability-generator-view" class="main-view">
                <header class="main-header">
                    <h1>Ability Reroller</h1>
                    <p>Select a Pokémon from your team in the sidebar to find new abilities for it.</p>
                    <div class="mt-4 flex justify-center flex-wrap gap-2">
                        <button type="submit" form="abilityGeneratorForm" id="reroll-ability-btn" class="generic-btn">Reroll Ability</button>
                    </div>
                </header>
                <div id="ability-result-output" class="w-full max-w-md mx-auto">
                    <!-- Reroll result will appear here -->
                </div>
            </div>
            <!-- MOVE VIEW -->
            <div id="move-view" class="main-view">
                <header class="main-header">
                    <h1>Move Randomizer</h1><p>Generate random moves.</p>
                    <div class="mt-4 flex justify-center flex-wrap gap-2"><button type="submit" form="moveGeneratorForm" class="generic-btn">Generate Moves</button></div>
                </header>
                <div id="move-result-output" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl mx-auto"></div>
            </div>
            <!-- NATURE VIEW -->
            <div id="nature-view" class="main-view"><header class="main-header"><h1>Nature Randomizer</h1><p>Explore random Pokémon natures.</p></header><div id="nature-result-output" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl mx-auto"></div></div>
            <!-- WTP VIEW -->
            <div id="wtp-view" class="main-view">
                <header class="main-header">
                    <h1>Who's That Pokémon?</h1>
                    <p>Current Score: <span id="wtp-score">0</span> | High Score: <span id="wtp-high-score">0</span></p>
                </header>
                <div id="wtp-result" class="text-center">
                    <!-- Game content will be generated here -->
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <!-- Custom Scripts -->
    <script src="assets/script.js" type="module"></script>
</body>
</html>
                transition: opacity 0.3s ease;
            }
            .sidebar-overlay.show { opacity: 1; visibility: visible; }
            .main-content { padding: 1rem 1rem 80px 1rem; } /* Increased padding for bottom nav */
        }

        /* General UI */
        .sidebar-panel { display: none; }
        .sidebar-panel.active { display: flex; flex-direction: column; height: 100%; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .form-group input, .form-group select {
            width: 100%;
            background-color: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            color: var(--text-light);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 2px var(--accent-color);
        }
        .sidebar-footer { margin-top: auto; display: flex; gap: 0.5rem; padding: 1rem; border-top: 1px solid var(--border-color); }
        .sidebar-footer button {
            width: 100%; padding: 0.75rem; border-radius: 0.5rem; font-weight: 600;
            background-color: var(--accent-color); color: white;
            transition: background-color 0.2s;
        }
        .sidebar-footer button:hover { background-color: var(--accent-color-dark); }
        .sidebar-footer button[type="reset"] { background-color: var(--tertiary-bg); }
        .sidebar-footer button[type="reset"]:hover { background-color: #4b5563; }
        .placeholder { text-align: center; color: var(--text-dark); padding-top: 4rem; }
        .placeholder-icon { width: 100px; height: 100px; margin: 0 auto 1rem; opacity: 0.3; }

        /* Card Polish */
        .card-container { perspective: 1000px; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .card-container.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 1rem;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }
        .card-back { transform: rotateY(180deg); }
        .type-icon { display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 50%; font-size: 12px; font-weight: bold; color: white; text-transform: uppercase; border: 2px solid rgba(255,255,255,0.2); }
        .type-normal { background-color: #A8A77A; } .type-fire { background-color: #EE8130; } .type-water { background-color: #6390F0; } .type-electric { background-color: #F7D02C; color: #1f2937 !important; } .type-grass { background-color: #7AC74C; } .type-ice { background-color: #96D9D6; } .type-fighting { background-color: #C22E28; } .type-poison { background-color: #A33EA1; } .type-ground { background-color: #E2BF65; } .type-flying { background-color: #A98FF3; } .type-psychic { background-color: #F95587; } .type-bug { background-color: #A6B91A; } .type-rock { background-color: #B6A136; } .type-ghost { background-color: #735797; } .type-dragon { background-color: #6F35FC; } .type-dark { background-color: #705746; } .type-steel { background-color: #B7B7CE; } .type-fairy { background-color: #D685AD; }
    </style>
</head>
<body>
    <div id="notification-container" class="fixed top-4 right-4 z-[3000] flex flex-col gap-2"></div>
    <div id="sidebar-overlay" class="hidden"></div>

    <!-- Modals -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-sm w-full text-center"><p id="confirmation-message" class="mb-4">Are you sure?</p><div class="flex gap-4"><button id="confirm-no-btn" class="w-full p-2 bg-tertiary-bg rounded">No</button><button id="confirm-yes-btn" class="w-full p-2 bg-red-600 text-white rounded">Yes</button></div></div></div>
    <div id="assign-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-sm w-full"><div class="flex justify-between items-center mb-4"><h3 id="assign-modal-title" class="font-bold text-lg">Assign to...</h3><button id="close-assign-modal-btn" class="text-2xl">&times;</button></div><div id="team-selection-list" class="space-y-2"></div></div></div>
    <div id="type-coverage-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-4xl w-full h-[90vh] flex flex-col">
        <div class="flex justify-between items-center mb-4"><h3 class="font-bold text-xl">Team Coverage Analysis</h3><button id="close-coverage-modal-btn" class="text-2xl">&times;</button></div>
        <div id="coverage-output" class="overflow-y-auto flex-grow"></div>
    </div></div>
    <div id="team-export-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-lg w-full flex flex-col"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-xl">Export Team</h3><button id="close-export-modal-btn" class="text-2xl">&times;</button></div><textarea id="export-textarea" class="w-full h-64 bg-primary-bg border border-border-color rounded p-2 text-sm font-mono"></textarea><button id="copy-export-btn" class="mt-4 p-2 bg-accent rounded text-white font-bold">Copy to Clipboard</button></div></div>
    <div id="move-details-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-md w-full"><div class="flex justify-between items-center mb-4"><h3 id="move-modal-name" class="font-bold text-2xl capitalize">Move Name</h3><button id="close-move-modal-btn" class="text-3xl">&times;</button></div><div id="move-modal-content"></div></div></div>

    <!-- Manual Move Selection Modal -->
    <div id="manual-move-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden"><div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-2xl w-full h-[90vh] flex flex-col"><div class="flex justify-between items-center mb-4"><h3 id="manual-move-modal-title" class="font-bold text-xl">Select Moves</h3><button id="close-manual-move-modal-btn" class="text-2xl">&times;</button></div><div id="manual-move-modal-content" class="overflow-y-auto flex-grow"></div></div></div>

    <!-- Manual Ability Selection Modal -->
    <div id="manual-ability-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden">
        <div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-lg w-full h-auto max-h-[80vh] flex flex-col">
            <div class="flex justify-between items-center mb-4"><h3 id="manual-ability-modal-title" class="font-bold text-xl">Select Ability</h3><button id="close-manual-ability-modal-btn" class="text-2xl">&times;</button></div>
            <div id="manual-ability-modal-content" class="overflow-y-auto flex-grow"></div>
        </div>
    </div>

    <!-- Manual Item Selection Modal -->
    <div id="manual-item-modal" class="fixed inset-0 bg-black/60 z-[4000] flex items-center justify-center p-4 hidden">
        <div class="bg-secondary-bg p-6 rounded-lg shadow-xl max-w-2xl w-full h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4"><h3 id="manual-item-modal-title" class="font-bold text-xl">Select Item</h3><button id="close-manual-item-modal-btn" class="text-2xl">&times;</button></div>
            <input type="search" id="item-search-input" placeholder="Search for an item..." class="w-full bg-primary-bg border border-border-color rounded p-2 mb-4">
            <div id="manual-item-modal-content" class="overflow-y-auto flex-grow"></div>
        </div>
    </div>

    <div class="app-container">
        <!-- App Navigation -->
        <nav class="app-nav">
            <button class="app-tab active" data-target="generator-panel" data-view="generator-view" title="Generator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.82m5.84-2.56a12.02 12.02 0 0 0-5.84-2.56V21m0-18V1.63a12.02 12.02 0 0 1 5.84 2.56m-5.84 2.56a6 6 0 0 1-5.84-7.38v4.82m5.84 2.56a12.02 12.02 0 0 0 5.84 2.56V3m0 18V2.63a12.02 12.02 0 0 0-5.84-2.56m-5.84 2.56a6 6 0 0 0 5.84 7.38V8.18m-5.84 2.56a12.02 12.02 0 0 1-5.84-2.56V3" /></svg>
            </button>
            <button class="app-tab" data-target="team-builder-panel" data-view="team-builder-view" title="Team Builder">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>
            </button>
            <button class="app-tab" data-target="pokedex-panel" data-view="pokedex-view" title="Pokédex">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" /></svg>
            </button>
            <button class="app-tab" data-target="ability-generator-panel" data-view="ability-generator-view" title="Ability Generator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" /></svg>
            </button>
            <!-- Item Generator - DISABLED -->
            <button class="app-tab relative opacity-50 pointer-events-none" title="Item Generator (Broken)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" /></svg>
                <span class="absolute inset-0 rounded-md ring-1 ring-red-500 pointer-events-none"></span>
            </button>
            <button class="app-tab" data-target="move-panel" data-view="move-view" title="Moves">M</button>
            <button class="app-tab" data-target="nature-panel" data-view="nature-view" title="Natures">N</button>
            <button class="app-tab" data-target="wtp-panel" data-view="wtp-view" title="Who's That Pokémon?">W</button>
        </nav>

        <!-- Sidebar -->
        <aside id="sidebar-main" class="sidebar">
            <!-- POKEMON GENERATOR PANEL -->
            <div id="generator-panel" class="sidebar-panel active">
                <div class="sidebar-header flex justify-between items-center">
                    <h2>Generator</h2>
                    <button class="close-sidebar-btn text-2xl md:hidden">&times;</button>
                </div>
                <form id="generatorForm" class="sidebar-content">
                    <div class="form-group">
                        <label for="count">How Many?</label>
                        <input type="number" id="count" name="count" value="1" min="1" max="6" class="w-full">
                    </div>

                    <details class="filter-group" open>
                        <summary>Regions</summary>
                        <div class="p-2 space-y-2 max-h-48 overflow-y-auto">
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="1" checked> Gen I (Kanto)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="2" checked> Gen II (Johto)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="3" checked> Gen III (Hoenn)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="4" checked> Gen IV (Sinnoh)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="5" checked> Gen V (Unova)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="6" checked> Gen VI (Kalos)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="7" checked> Gen VII (Alola)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="8" checked> Gen VIII (Galar/Hisui)</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="gen" value="9" checked> Gen IX (Paldea/Kitakami)</label>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Typing</summary>
                        <div class="p-2 grid grid-cols-2 gap-2">
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="normal" checked> Normal</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="fire" checked> Fire</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="water" checked> Water</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="grass" checked> Grass</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="electric" checked> Electric</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="ice" checked> Ice</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="fighting" checked> Fighting</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="poison" checked> Poison</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="ground" checked> Ground</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="flying" checked> Flying</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="psychic" checked> Psychic</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="bug" checked> Bug</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="rock" checked> Rock</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="ghost" checked> Ghost</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="dragon" checked> Dragon</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="dark" checked> Dark</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="steel" checked> Steel</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="type" value="fairy" checked> Fairy</label>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Color</summary>
                        <div class="p-2">
                            <select id="color-filter" name="color" class="w-full bg-primary-bg border border-border-color rounded p-2">
                                <option value="">Any Color</option>
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>
                    </details>

                    <details class="filter-group">
                        <summary>Rarity & Forms</summary>
                        <div class="p-2 space-y-2">
                            <label class="flex items-center gap-2"><input type="checkbox" name="include-legendary" checked> Include Legendary</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="include-mythical" checked> Include Mythical</label>
                            <label class="flex items-center gap-2"><input type="checkbox" name="include-forms" checked> Include Alternate Forms</label>
                        </div>
                    </details>
                    
                    <details class="filter-group">
                        <summary>Evolution Stage</summary>
                        <div class="p-2 space-y-2">
                             <label class="flex items-center gap-2"><input type="checkbox" name="evolution-stage" value="nfe" checked> Not Fully Evolved</label>
                             <label class="flex items-center gap-2"><input type="checkbox" name="evolution-stage" value="fully-evolved" checked> Fully Evolved</label>
                        </div>
                    </details>

                </form>
                <div class="sidebar-footer"><button type="submit" form="generatorForm">Generate</button><button type="reset" form="generatorForm">Reset</button></div>
            </div>
            <!-- TEAM BUILDER PANEL -->
            <div id="team-builder-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Team Builder</h2><button class="close-sidebar-btn text-3xl md:hidden">&times;</button></div>
                <div class="sidebar-content" id="team-builder-content">
                    <div><h3 class="font-bold mb-2">Current Team</h3><div id="team-builder-output" class="space-y-2"></div></div>
                    <div><h3 class="font-bold mb-2">Saved Teams</h3><div id="saved-teams-list" class="space-y-1"></div></div>
                </div>
                <div class="sidebar-footer flex-col gap-2">
                    <div class="flex gap-2"><input type="text" id="teamNameInput" placeholder="Team Name" class="w-full bg-primary-bg border border-border-color rounded p-2"><button id="saveTeamBtn" class="p-2 bg-accent rounded">Save</button></div>
                    <div class="grid grid-cols-3 gap-2">
                        <button id="random-team-btn" class="p-2 bg-tertiary-bg rounded text-sm">Random Team</button>
                        <button id="analyze-team-btn" class="p-2 bg-tertiary-bg rounded text-sm">Analyze</button>
                        <button id="export-team-btn" class="p-2 bg-tertiary-bg rounded text-sm">Export</button>
                        <button id="clearTeamBtn" class="p-2 bg-red-800 rounded text-sm">Clear</button>
                    </div>
                </div>
            </div>
            <!-- POKEDEX PANEL -->
            <div id="pokedex-panel" class="sidebar-panel">
                 <div class="sidebar-header flex justify-between items-center"><h2>Pokédex</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                 <form id="pokedexForm" class="sidebar-content"><div class="form-group"><label for="pokedexSearch">Search by Name or Number</label><input type="search" id="pokedexSearch" placeholder="e.g., Pikachu or 25"></div></form>
                 <div class="sidebar-footer"><button type="submit" form="pokedexForm">Search</button></div>
            </div>
            <!-- ABILITY PANEL -->
            <div id="ability-generator-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Ability Reroller</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <div class="sidebar-content">
                    <div id="ability-reroller-content">
                        <!-- This will be populated by script.js -->
                    </div>
                    <div class="form-group mt-4">
                        <label for="ability-count">How Many?</label>
                        <input type="number" id="ability-count" value="1" min="1" max="10">
                    </div>
                </div>
                <div class="sidebar-footer"><button id="reroll-ability-btn">Reroll Ability</button></div>
            </div>
            <!-- ITEM PANEL -->
            <div id="item-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Item Generator</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="itemGeneratorForm" class="sidebar-content"><div class="form-group"><label for="item-count">How Many?</label><input type="number" id="item-count" value="1" min="1" max="10"></div></form>
                <div class="sidebar-footer"><button type="submit" form="itemGeneratorForm">Generate</button></div>
            </div>
            <!-- MOVE PANEL -->
            <div id="move-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Move Generator</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="moveGeneratorForm" class="sidebar-content"><div class="form-group"><label for="move-count">How Many?</label><input type="number" id="move-count" value="1" min="1" max="10"></div></form>
                <div class="sidebar-footer"><button type="submit" form="moveGeneratorForm">Generate</button></div>
            </div>
             <!-- NATURE PANEL -->
            <div id="nature-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Nature Generator</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <form id="natureGeneratorForm" class="sidebar-content"><div class="form-group"><label for="nature-count">How Many?</label><input type="number" id="nature-count" value="1" min="1" max="10"></div></form>
                <div class="sidebar-footer"><button type="submit" form="natureGeneratorForm">Generate</button></div>
            </div>
             <!-- WTP PANEL -->
            <div id="wtp-panel" class="sidebar-panel">
                <div class="sidebar-header flex justify-between items-center"><h2>Who's That Pokémon?</h2><button class="close-sidebar-btn text-2xl md:hidden">&times;</button></div>
                <div class="sidebar-content"><p class="text-sm text-gray-400">Test your Pokémon knowledge! Click "New Game" to start.</p></div>
                <div class="sidebar-footer"><button id="wtp-new-game-btn">New Game</button></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- GENERATOR VIEW -->
            <div id="generator-view" class="main-view active"><div id="result-output" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 w-full place-items-center"></div></div>
            <!-- TEAM BUILDER VIEW -->
            <div id="team-builder-view" class="main-view"><div class="text-center text-gray-500 pt-16"><h2 class="text-2xl font-bold">Team Hub</h2><p>Manage your current team and saved teams in the sidebar.</p></div></div>
            <!-- POKEDEX VIEW -->
            <div id="pokedex-view" class="main-view">
                <!-- Pokémon Card will be inserted here by JS -->
                <div id="evolution-chain-container" class="mt-8"></div>
            </div>
            <!-- ABILITY VIEW -->
            <div id="ability-generator-view" class="main-view">
                <header class="main-header">
                    <h1>Ability Reroller</h1>
                    <p>Select a Pokémon from your team in the sidebar and give it a new random ability!</p>
                </header>
                <div id="ability-result-output" class="w-full max-w-md mx-auto">
                    <!-- Reroll result will appear here -->
                </div>
            </div>
            <!-- ITEM VIEW -->
            <div id="item-view" class="main-view"><header class="main-header"><h1>Item Randomizer</h1><p>Find random held items.</p></header><div id="item-result-output" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl mx-auto"></div></div>
            <!-- MOVE VIEW -->
            <div id="move-view" class="main-view"><header class="main-header"><h1>Move Randomizer</h1><p>Generate random moves for your Pokémon.</p></header><div id="move-result-output" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl mx-auto"></div></div>
            <!-- NATURE VIEW -->
            <div id="nature-view" class="main-view"><header class="main-header"><h1>Nature Randomizer</h1><p>Explore random Pokémon natures.</p></header><div id="nature-result-output" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl mx-auto"></div></div>
            <!-- WTP VIEW -->
            <div id="wtp-view" class="main-view">
                <header class="main-header">
                    <h1>Who's That Pokémon?</h1>
                    <p>Current Score: <span id="wtp-score">0</span> | High Score: <span id="wtp-high-score">0</span></p>
                </header>
                <div id="wtp-result" class="text-center">
                    <!-- Game content will be generated here -->
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Bundle (for Tailwind CSS) -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script src="https://unpkg.com/flowbite@1.4.6/dist/flowbite.bundle.min.js"></script>
    <!-- Custom Scripts -->
    <script src="assets/script.js" type="module"></script>
</body>
</html>
